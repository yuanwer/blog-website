<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.68">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/blog-website/images/favicon.png"><title>JavaScript 中的 this | 假老练的博客</title><meta name="description" content="东拉西扯广播电台">
    <link rel="preload" href="/blog-website/assets/style-ddeb817d.css" as="style"><link rel="stylesheet" href="/blog-website/assets/style-ddeb817d.css">
    <link rel="modulepreload" href="/blog-website/assets/app-1bbcc8ed.js"><link rel="modulepreload" href="/blog-website/assets/index.html-97038074.js"><link rel="modulepreload" href="/blog-website/assets/index.html-fddd2f3d.js">
    <link rel="prefetch" href="/blog-website/assets/index.html-c7d15c62.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-10c9a623.js" as="script"><link rel="prefetch" href="/blog-website/assets/CSS.html-4a2d1bb0.js" as="script"><link rel="prefetch" href="/blog-website/assets/HTML.html-4889f190.js" as="script"><link rel="prefetch" href="/blog-website/assets/前言.html-37b6c136.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-c9277e2e.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-c47b9dc6.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-52ccacac.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-72a535d1.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-0bc4a013.js" as="script"><link rel="prefetch" href="/blog-website/assets/01-文件拖拽上传.html-50e6f4df.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-7f938291.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-61401e60.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-3eb6f6f3.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-ca09905f.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-f45a7ff1.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-dfe7c05f.js" as="script"><link rel="prefetch" href="/blog-website/assets/promise用法.html-b13ec525.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-0c7b27a4.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-43c41ec5.js" as="script"><link rel="prefetch" href="/blog-website/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-6add594d.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-7472b55d.js" as="script"><link rel="prefetch" href="/blog-website/assets/CSS.html-a868b8fb.js" as="script"><link rel="prefetch" href="/blog-website/assets/HTML.html-29e83bf3.js" as="script"><link rel="prefetch" href="/blog-website/assets/前言.html-ae3d5122.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-99686691.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-839876a9.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-d0e445ce.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-1bb347ec.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-f27ee47e.js" as="script"><link rel="prefetch" href="/blog-website/assets/01-文件拖拽上传.html-2c25dbb0.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-fd4593f5.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-f6bc54a0.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-09f3884c.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-b1910b1e.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-ec522952.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-ec15224d.js" as="script"><link rel="prefetch" href="/blog-website/assets/promise用法.html-a171e17d.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-3d00e859.js" as="script"><link rel="prefetch" href="/blog-website/assets/index.html-013febfb.js" as="script"><link rel="prefetch" href="/blog-website/assets/404.html-fdb3a783.js" as="script"><link rel="prefetch" href="/blog-website/assets/giscus-0b7adcf8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog-website/" class=""><!----><span class="site-name">假老练的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">JavaScript 中的 this <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#this-是什么-为什么要使用它" class="router-link-active router-link-exact-active sidebar-item" aria-label="this 是什么，为什么要使用它"><!--[--><!--]--> this 是什么，为什么要使用它 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#this-的特性" class="router-link-active router-link-exact-active sidebar-item" aria-label="this 的特性"><!--[--><!--]--> this 的特性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#this-到底指向谁" class="router-link-active router-link-exact-active sidebar-item" aria-label="this 到底指向谁"><!--[--><!--]--> this 到底指向谁 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#默认绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="默认绑定"><!--[--><!--]--> 默认绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#隐式绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="隐式绑定"><!--[--><!--]--> 隐式绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#显示绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="显示绑定"><!--[--><!--]--> 显示绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#内置函数中的绑定规则" class="router-link-active router-link-exact-active sidebar-item" aria-label="内置函数中的绑定规则"><!--[--><!--]--> 内置函数中的绑定规则 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#new-绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="new 绑定"><!--[--><!--]--> new 绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#this-绑定规则的优先级" class="router-link-active router-link-exact-active sidebar-item" aria-label="this 绑定规则的优先级"><!--[--><!--]--> this 绑定规则的优先级 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#超出绑定规则的东西" class="router-link-active router-link-exact-active sidebar-item" aria-label="超出绑定规则的东西"><!--[--><!--]--> 超出绑定规则的东西 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#显示绑定被忽略" class="router-link-active router-link-exact-active sidebar-item" aria-label="显示绑定被忽略"><!--[--><!--]--> 显示绑定被忽略 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#间接的函数引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="间接的函数引用"><!--[--><!--]--> 间接的函数引用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#箭头函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="箭头函数"><!--[--><!--]--> 箭头函数 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-website/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/this/#评论区" class="router-link-active router-link-exact-active sidebar-item" aria-label="评论区"><!--[--><!--]--> 评论区 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="javascript-中的-this" tabindex="-1"><a class="header-anchor" href="#javascript-中的-this" aria-hidden="true">#</a> JavaScript 中的 this</h1><p>this 是 js 中的一个关键字，但是它和其他关键字不同，比如 <code>const</code> 用来声明常量，<code>function</code> 用来声明函数，这些都是很明确的，但是 <code>this</code> 却不是那么明确，它的值是在运行时才能确定的，这就导致了它的行为不是那么容易预测。</p><p>让我们来分析 this 的各种使用场景，彻底拿捏它。</p><h2 id="this-是什么-为什么要使用它" tabindex="-1"><a class="header-anchor" href="#this-是什么-为什么要使用它" aria-hidden="true">#</a> this 是什么，为什么要使用它</h2><p><strong>js 中的 this，就是当前执行代码的上下文对象的引用。</strong>，另一种说法是 this 是当前函数被调用时绑定的一个对象。</p><p>在很多常见的编程语言中，都有 this 关键字，但这些语言代码中的 this 通常只会出现在类的方法中：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, my name is &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;, I&#39;m &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token string">&quot; years old.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但 js 中的 this 不论是使用的位置，还是它的含义，都更加的灵活。</p><p>我们举个例子，声明一个 <code>person</code> 对象，包含一些属性和方法，首先是不使用 this 的写法：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, I&#39;m </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is running.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>person<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is sleeping.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

person<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Hello, my name is Tom, I&#39;m 18 years old.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样的问题在于，我们想要获取到 <code>name</code>，就必须通过 <code>person.name</code> 的方式来获取，我们想要修改 <code>name</code>，就必须通过 <code>person.name = &quot;Jerry&quot;</code> 的方式来修改。</p><p>但如果 <code>person</code> 对象的名字改为 <code>obj</code>，就需要将所有的 <code>person.xxx</code> 都改为 <code>obj.xxx</code>，维护起来就很麻烦。</p><p>同样的例子，我们使用 this 来改写一下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, I&#39;m </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is running.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is sleeping.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

person<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Hello, my name is Tom, I&#39;m 18 years old.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>首先是代码简洁了很多，其次是我们不需要关心 <code>person</code> 对象的名字，只需要通过 <code>this</code> 来获取属性就可以了。</p><h2 id="this-的特性" tabindex="-1"><a class="header-anchor" href="#this-的特性" aria-hidden="true">#</a> this 的特性</h2><p>我先用一点代码来演示下 this 的一些特性：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Tom&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过上面的几段代码，就能发现：</p><ol><li>函数被调用时，js 会给函数内部的 this 绑定一个值</li><li>this 的值，与它编写的位置无关</li><li>this 的值，与所在函数被调用的方式和被调用的位置有关</li></ol><p>看到这里你是否觉得 js 中的 this 是一个诡异的东西，别担心，让我们全面的认识它的各种规则。</p><h2 id="this-到底指向谁" tabindex="-1"><a class="header-anchor" href="#this-到底指向谁" aria-hidden="true">#</a> this 到底指向谁</h2><p>我们分不同的场景来讨论 this 的绑定规则，也就是所谓的 this 指向。</p><h3 id="默认绑定" tabindex="-1"><a class="header-anchor" href="#默认绑定" aria-hidden="true">#</a> 默认绑定</h3><p>默认绑定指的是函数被独立调用，你可以理解为函数没有被绑定到任何对象上。此时函数内部的 this 会被绑定到全局对象上。</p><p>注意我们讨论的是非严格模式下的情况。如果处于严格模式，此规则的 this 会被绑定到 undefined 上。</p><h4 id="普通函数调用" tabindex="-1"><a class="header-anchor" href="#普通函数调用" aria-hidden="true">#</a> 普通函数调用</h4><p>函数被直接调用，没有与任何对象绑定，通常情况下，this 会被绑定到全局对象上，也就是 window。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="函数的嵌套调用" tabindex="-1"><a class="header-anchor" href="#函数的嵌套调用" aria-hidden="true">#</a> 函数的嵌套调用</h4><p>多个函数之间产生了嵌套调用，但所有的函数都没有被绑定到某个对象上，那么 this 也会被绑定到全局对象上。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
  <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
  <span class="token function">foo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
<span class="token punctuation">}</span>

<span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当代码执行时，所有的 this 都打印的是 window。</p><h4 id="函数作为另一个函数的参数" tabindex="-1"><a class="header-anchor" href="#函数作为另一个函数的参数" aria-hidden="true">#</a> 函数作为另一个函数的参数</h4><p>函数作为另一个函数的参数，也就是回调函数。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对最后一个例子进行修改：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>bar<span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为什么打印的结果还是 window 呢，原因很简单，因为当 obj.bar 真正被调用时，它是被独立调用的，所以 this 会被绑定到全局对象上。</p><h3 id="隐式绑定" tabindex="-1"><a class="header-anchor" href="#隐式绑定" aria-hidden="true">#</a> 隐式绑定</h3><p>还有一种比较常见的函数调用方式，就是通过对象来调用函数，这种方式就是隐式绑定。</p><h4 id="调用对象的方法" tabindex="-1"><a class="header-anchor" href="#调用对象的方法" aria-hidden="true">#</a> 调用对象的方法</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过 obj.bar()调用 bar 函数，bar 函数内部的 this 会被绑定到 obj 上。</p><h4 id="对象的链式调用" tabindex="-1"><a class="header-anchor" href="#对象的链式调用" aria-hidden="true">#</a> 对象的链式调用</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Jerry&#39;</span><span class="token punctuation">,</span>
  obj1<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj2<span class="token punctuation">.</span>obj1<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 obj2 中，有个属性 obj1 引用了 obj1 对象，当我们通过 obj2.obj1.bar()调用 bar 函数时，bar 函数内部的 this 会被绑定到 obj1 上。</p><h4 id="绑定丢失" tabindex="-1"><a class="header-anchor" href="#绑定丢失" aria-hidden="true">#</a> 绑定丢失</h4><p>先看代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> bar <span class="token operator">=</span> obj<span class="token punctuation">.</span>foo
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后打印的 this 是 window，为什么不是 obj 呢？</p><p>原因很简单，<code>const bar = obj.foo</code> 的作用是将 obj.foo （也就是 foo 函数）的引用赋值给 bar，但是这个引用并没有保留 obj 的信息，当 bar 被调用时，foo 函数是被独立调用的，所以 this 会被绑定到全局对象上。</p><hr><p>隐式绑定有一个必要的前提条件，就是调用函数的对象必须存在，且对象内部有对此函数的引用。</p><p>话好像很绕，看代码你就明白了。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>正是因为有了上面这个必要条件，函数被调用时，this 才会间接的绑定到对象上。</p><h3 id="显示绑定" tabindex="-1"><a class="header-anchor" href="#显示绑定" aria-hidden="true">#</a> 显示绑定</h3><p>那问题来了，如果我不想满足上面的条件，我就想让 this 绑定到指定的对象上，换句话说：我不希望在对象中有对这个函数的引用，但我又想要在这个对象上调用这个函数，怎么办呢？</p><p>这就需要用到显示绑定了。js 提供了三个方法来实现显示绑定，分别是 call、apply 和 bind。</p><h4 id="call-和-apply" tabindex="-1"><a class="header-anchor" href="#call-和-apply" aria-hidden="true">#</a> call 和 apply</h4><p>直接上代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Tom&#39; }</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// window</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// Number对象，{123}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>apply 的使用方式和 call 一样，只是传参的方式不同，call 是一个一个的传参，apply 是传一个数组。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span> param2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>param1<span class="token punctuation">,</span> param2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Tom&#39; } 1 2</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Tom&#39; } 1 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="bind" tabindex="-1"><a class="header-anchor" href="#bind" aria-hidden="true">#</a> bind</h4><p>bind 的作用是让一个函数的 this 总是显示的绑定到指定的对象上，它会返回一个新的函数，这个函数的 this 会被永久的绑定到指定的对象上。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Tom&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的代码使用 bind 方法将 foo 函数的 this 绑定到了{name: &#39;Tom&#39;}上，然后将返回的新函数赋值给了 bar，当 bar 被调用时，它的 this 固定是{name: &#39;Tom&#39;}。</p><p>bind 和 call、apply 的区别在于，bind 不会调用函数，它只是返回一个新的函数，而 call 和 apply 会立即调用函数。</p><h3 id="内置函数中的绑定规则" tabindex="-1"><a class="header-anchor" href="#内置函数中的绑定规则" aria-hidden="true">#</a> 内置函数中的绑定规则</h3><p>内置函数指的是 js 中的一些内置对象的方法，比如 forEach、setTimeout 等。</p><p>当我们使用这些内置函数时，会要求我们传入另一个函数 A，函数 A 会被内置函数调用，而不是我们手动调用，那么函数 A 中的 this 又是如何绑定的呢？</p><h4 id="settimeout" tabindex="-1"><a class="header-anchor" href="#settimeout" aria-hidden="true">#</a> setTimeout</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 setTimeout 时会传入一个函数，当函数执行时，内部的 this 通常是 window。</p><p>这和 setTimeout 的实现有关，它的内部是通过 apply 来调用函数的，并且绑定的是全局对象。</p><h4 id="数组的-foreach" tabindex="-1"><a class="header-anchor" href="#数组的-foreach" aria-hidden="true">#</a> 数组的 forEach</h4><p>数组有一个高阶函数 forEach，用于遍历数组。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// window window window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>传入 forEach 的函数被调用时，this 也是指向 window，因为默认情况下，传入的函数是被独立调用的，这符合上面的默认绑定规则。</p><p>那我们是否可以改变 forEach 中函数的 this 呢？</p><p>答案是肯定的，forEach 有第二个可选的参数，用于指定函数中的 this。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Tom&#39; } { name: &#39;Tom&#39; } { name: &#39;Tom&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="元素的点击事件" tabindex="-1"><a class="header-anchor" href="#元素的点击事件" aria-hidden="true">#</a> 元素的点击事件</h4><p>我们有有个 div 元素，当点击它时，会触发一个点击事件，我们可以通过 addEventListener 来监听这个事件。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// div</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在点击事件的回调函数被执行时，this 会被绑定到触发事件的元素上。</p><hr><p>某些内置函数，我们很难确定它内部的如何调用我们传入的回调函数的，一方面可以通过 chromium 的源码来查看，另一方面是通过开发经验来判断。</p><p>但无论怎样，这些内置函数的内部的实现也是符合我们上面讲的绑定规则的。</p><h3 id="new-绑定" tabindex="-1"><a class="header-anchor" href="#new-绑定" aria-hidden="true">#</a> new 绑定</h3><p>js 中的函数可以当做一个类的构造函数来使用，也就是在调用函数时，前面加上 new 关键字。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// Person {}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment">// Person { name: &#39;Tom&#39; }</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// Person { name: &#39;Tom&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 new 关键字来调用函数时，构造函数的内部操作如下：</p><ol><li>创建一个全新的对象</li><li>将这个对象的原型指向构造函数的 prototype 属性</li><li>将新对象绑定到构造函数的 this 上</li><li>如果构造函数没有明确的返回其他对象，那么返回这个新对象</li></ol><blockquote><p>关于构造函数的详细学习在单独的文章，此处不再展开。</p></blockquote><h3 id="this-绑定规则的优先级" tabindex="-1"><a class="header-anchor" href="#this-绑定规则的优先级" aria-hidden="true">#</a> this 绑定规则的优先级</h3><p>如果一个函数同时应用了上面的多种绑定规则，这些规则有优先级吗，哪个规则会生效呢？</p><h4 id="默认绑定的优先级最低" tabindex="-1"><a class="header-anchor" href="#默认绑定的优先级最低" aria-hidden="true">#</a> 默认绑定的优先级最低</h4><p>默认绑定的优先级是最低的，只要存在了其他绑定规则，那么默认绑定就不会生效。</p><h4 id="显示绑定的优先级高于隐式绑定" tabindex="-1"><a class="header-anchor" href="#显示绑定的优先级高于隐式绑定" aria-hidden="true">#</a> 显示绑定的优先级高于隐式绑定</h4><p>显示绑定的优先级高于隐式绑定，也就是说，如果一个函数同时应用了显示绑定和隐式绑定，那么显示绑定会生效。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Jerry&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Jerry&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="new-绑定的优先级高于隐式绑定" tabindex="-1"><a class="header-anchor" href="#new-绑定的优先级高于隐式绑定" aria-hidden="true">#</a> new 绑定的优先级高于隐式绑定</h4><p>new 绑定的优先级高于隐式绑定，也就是说，如果一个函数同时应用了 new 绑定和隐式绑定，那么 new 绑定会生效。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// foo {}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="new-绑定的优先级高于-bind" tabindex="-1"><a class="header-anchor" href="#new-绑定的优先级高于-bind" aria-hidden="true">#</a> new 绑定的优先级高于 bind</h4><p>new 绑定和 call、apply 不能同时使用，所以下面的代码会报错，也不存在 new 和 call、apply 谁优先级高的说法。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">foo<span class="token punctuation">.</span>call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Jerry&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// TypeError: foo.call is not a constructor</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是 new 绑定和 bind 可以同时使用，这时候 new 绑定会生效。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Jerry&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// bar {}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>总结下 this 不同绑定规则的优先级：new 绑定 &gt; 显示绑定（bind） &gt; 隐式绑定 &gt; 默认绑定。</p><h2 id="超出绑定规则的东西" tabindex="-1"><a class="header-anchor" href="#超出绑定规则的东西" aria-hidden="true">#</a> 超出绑定规则的东西</h2><p>在神话故事中，总有一些超出常规的角色，在 js 中也是一样，有一些东西超出了我们上面讲的绑定规则。</p><h3 id="显示绑定被忽略" tabindex="-1"><a class="header-anchor" href="#显示绑定被忽略" aria-hidden="true">#</a> 显示绑定被忽略</h3><p>显示绑定的方法并不总是有效，当我们传入 null 或 undefined 时，显示绑定会被忽略，this 会被默认绑定到全局对象。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// { name: &#39;Tom&#39; }</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="间接的函数引用" tabindex="-1"><a class="header-anchor" href="#间接的函数引用" aria-hidden="true">#</a> 间接的函数引用</h3><p>先看一段代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token number">2</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">(</span>num2 <span class="token operator">=</span> num1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>(num2 = num1)</code>这个表达式的值是 1，因为它是一个赋值表达式，赋值表达式的值就是等号右边的值。</p><p>再来看一段代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;obj1&#39;</span><span class="token punctuation">,</span>
  foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;obj2&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj1<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj1</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>foo <span class="token operator">=</span> obj1<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>(obj2.foo = obj1.foo)</code>这个表达式的值是 foo 函数，后面加上 () 直接调用这个函数符合默认绑定规则，所以 this 会被绑定到全局对象上。</p><h3 id="箭头函数" tabindex="-1"><a class="header-anchor" href="#箭头函数" aria-hidden="true">#</a> 箭头函数</h3><blockquote><p>剪头函数的详细学习在单独的文章，此处不再展开。</p></blockquote><p>箭头函数没有自己的 this，或者说不会绑定 this，而是根据外层作用域来决定 this。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span><span class="token punctuation">,</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// obj</span>
    <span class="token keyword">const</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// obj</span>
    <span class="token punctuation">}</span>
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>剪头函数不能通过 call、apply、bind 来改变 this 的指向，因为它没有自己的 this。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Tom&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>this 是 js 中的一个关键字，它的值是在运行时才能确定的，它的值取决于函数的调用方式。</p><p>js 中的 this 有以下几种绑定规则：</p><ul><li>默认绑定</li><li>隐式绑定</li><li>显示绑定</li><li>new 绑定</li></ul><p>this 的绑定规则优先级：new 绑定 &gt; 显示绑定（bind） &gt; 隐式绑定 &gt; 默认绑定。</p><p>this 的绑定规则有一些例外，比如显示绑定被忽略，箭头函数没有自己的 this。</p><h2 id="评论区" tabindex="-1"><a class="header-anchor" href="#评论区" aria-hidden="true">#</a> 评论区</h2><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog-website/assets/app-1bbcc8ed.js" defer></script>
  </body>
</html>
